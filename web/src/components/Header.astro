---
const navItems = [
  { label: 'Home', href: '/' },
  { label: 'About', href: '/about/' },
  { label: 'Contact', href: '/contact/' },
];

const normalizePath = (path: string = '/') => {
  if (!path) return '/';
  return path !== '/' ? path.replace(/\/$/, '') : '/';
};

const currentPath = normalizePath(Astro.url?.pathname ?? '/');
---

<header class="w-full border-b border-black/10 bg-[rgba(247,247,242,0.95)] backdrop-blur-md sticky top-0 z-50">
  <div class="max-w-5xl mx-auto px-6 md:px-10 py-4 flex flex-col gap-4 md:flex-row md:items-center md:justify-between">
    <div>
      <a href="./" class="text-2xl font-extrabold tracking-tight group">
        <span class="relative inline-flex items-center gap-3">
          <img src="/logo.svg" alt="Ian Yulianto Monogram" class="h-9 w-9" loading="lazy" decoding="async" />
          <span class="group-hover:translate-x-1 transition-transform">IAN YULIANTO</span>
        </span>
      </a>
      <p class="mt-2 text-[0.65rem] uppercase tracking-[0.35em] text-black/60">DevOps & AWS Strategist</p>
    </div>

    <div class="flex flex-col gap-3 md:flex-row md:items-center md:justify-end">
      <nav>
        <ul class="flex flex-wrap gap-4 md:gap-6">
          {navItems.map(item => {
            const isActive = normalizePath(item.href) === currentPath;
            return (
              <li>
                <a 
                  href={item.href} 
                  class:list={[
                    'text-[0.7rem] uppercase tracking-[0.35em] inline-flex items-center gap-2 transition-colors duration-200 border-b border-transparent pb-1',
                    isActive
                      ? 'text-black border-black'
                      : 'text-black/60 hover:text-black'
                  ]}
                >
                  {item.label}
                </a>
              </li>
            );
          })}
        </ul>
      </nav>
      <span class="text-[0.65rem] uppercase tracking-[0.3em] border border-black/20 px-3 py-1 inline-flex items-center gap-2 bg-white/60 shadow-[3px_3px_0_rgba(0,0,0,0.15)]">
        <span class="inline-flex h-2 w-2 rounded-full bg-green-500 animate-pulse"></span>
        Available
      </span>
    </div>
  </div>
</header>
